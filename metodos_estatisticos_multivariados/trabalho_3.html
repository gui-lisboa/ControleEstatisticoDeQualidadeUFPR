
<!DOCTYPE html>

<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Trabalho No. 3 &#8212; Estatística - UFPR</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Pesquisar" href="../search.html" />
    <link rel="next" title="Trabalho No. 4" href="trabalho_4.html" />
    <link rel="prev" title="Trabalho No. 2" href="trabalho_2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="pt">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Estatística - UFPR</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Pesquisar..." aria-label="Pesquisar..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Análise de Regressão Linear
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/atividade1.html">
   Atividade 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/atividade2.html">
   Atividade 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/atividade4.html">
   Atividade 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/atividade6.html">
   Atividade 6
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/prova1.html">
   Avaliação 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_regressao_linear/projeto_final.html">
   Projeto Final: Modelo de Regressão Linear para Taxa de Vacinação contra COVID-19
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Controle Estatístico de Qualidade
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../controle_estatistico_de_qualidade/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../controle_estatistico_de_qualidade/atividade2.html">
   Atividade 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../controle_estatistico_de_qualidade/atividade3.html">
   Atividade 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../controle_estatistico_de_qualidade/atividade4.html">
   Atividade 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../controle_estatistico_de_qualidade/prova1.html">
   Prova 1
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Planejamento de Experimentos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../planejamento_de_experimentos/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../planejamento_de_experimentos/anotacoes_prova_1.html">
   Anotações - Prova 1
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Teoria do Risco
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../teoria_do_risco/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../teoria_do_risco/atividade1.html">
   Atividade 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../teoria_do_risco/atividade2.html">
   Atividade 2
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Visualização de Dados
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/desafio1.html">
   Desafio 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/avaliacao1.html">
   Avaliação 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/desafio2.html">
   Desafio 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/avaliacao2.html">
   Avaliação 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualizacao_de_dados/exame.html">
   Exame
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Processos Estocásticos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../processos_estocasticos/intro.html">
   Sobre
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../processos_estocasticos/trabalho.html">
   Modelo Aberto de Jackson Aplicado à uma Estação de Tratamento de Água
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Estatística Não Paramétrica
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../nao_parametrica/anotacoes.html">
   Anotações para prova
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nao_parametrica/desafio_1.html">
   Teste Não-Paramétrico de Alternativas Ordenadas de Jonckheere-Terpstra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nao_parametrica/desafio_3.html">
   Comparação de poder dos testes Z e Binomial.
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Análise de Dados Categóricos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_dados_categoricos/lista_1.html">
   1º Lista de Exercícios
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_dados_categoricos/lista_2.html">
   2º Lista de Exercícios
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modelos Lineares Generalizados
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../modelos_lineares_generalizados/lista_2.html">
   Trabalho No. 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../modelos_lineares_generalizados/lista_3.html">
   Trabalho No. 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../modelos_lineares_generalizados/lista_4.html">
   Trabalho No. 4
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modelos Estatísticos Multivariados
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="trabalho_1.html">
   Trabalho No. 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trabalho_2.html">
   Trabalho No. 2
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Trabalho No. 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trabalho_4.html">
   Trabalho No. 4
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Extensões de Modelos de Regressão
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../extensoes_modelos_regressao/exercicio_5.html">
   Exercício 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Análise de Séries Temporais
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_series_temporais/trabalho_1.html">
   Trabalho No. 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_series_temporais/trabalho_2.html">
   Trabalho No. 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_series_temporais/trabalho_3.html">
   Trabalho No. 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analise_de_series_temporais/trabalho_4.html">
   Trabalho No. 4
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Inferência Bayesiana
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../inferencia_bayesiana/exercicios.html">
   Exercícios
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/metodos_estatisticos_multivariados/trabalho_3.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#secao-xi-8">
   Seção XI.8
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-5">
     Questão 5
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-9">
     Questão 9
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-10-usando-analise-de-cluster">
     Questão 10 (usando Análise de Cluster)
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Trabalho No. 3</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#secao-xi-8">
   Seção XI.8
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-5">
     Questão 5
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-9">
     Questão 9
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questao-10-usando-analise-de-cluster">
     Questão 10 (usando Análise de Cluster)
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="trabalho-no-3">
<h1>Trabalho No. 3<a class="headerlink" href="#trabalho-no-3" title="Link permanente para este título">#</a></h1>
<ul class="simple">
<li><p>Aluno: Guilherme Lisboa de Oliveira (GRR20170414)</p></li>
</ul>
<div class="admonition-questoes admonition">
<p class="admonition-title">Questões</p>
<p>Questões: 5 e 9 na Seção XI.8 Exercícios em http://leg.ufpr.br/~lucambio/MSM/MSM11.html#MSMXI.9</p>
<p>Aplicar análise de cluster aos dados do exercício 10 na Seção XI.8 em http://leg.ufpr.br/~lucambio/MSM/MSM11.html#MSMXI.9</p>
</div>
<section id="secao-xi-8">
<h2>Seção XI.8<a class="headerlink" href="#secao-xi-8" title="Link permanente para este título">#</a></h2>
<section id="questao-5">
<h3>Questão 5<a class="headerlink" href="#questao-5" title="Link permanente para este título">#</a></h3>
<p>Este conjunto de dados fornece dados sobre registros atléticos de 55 países.
Observe que os registros dos 100m, 200m, 400m, 800m são em segundos e 1500m, 5000m, 10000m e Marathon em minutos. Aplique componentes principais normalizadas. Interprete seus resultados.</p>
<p>Importando os dados, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">ESPAÇO</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>

<span class="n">registros_atléticos</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;./dados/AthleticRecords.txt&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="n">ESPAÇO</span><span class="p">)</span>
<span class="n">registros_atléticos</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>100m</th>
      <th>200m</th>
      <th>400m</th>
      <th>800m</th>
      <th>1500m</th>
      <th>5000m</th>
      <th>10000m</th>
      <th>Marathon</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>10.39</td>
      <td>20.81</td>
      <td>46.84</td>
      <td>1.81</td>
      <td>3.70</td>
      <td>14.04</td>
      <td>29.36</td>
      <td>137.71</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Australia</td>
      <td>10.31</td>
      <td>20.06</td>
      <td>44.84</td>
      <td>1.74</td>
      <td>3.57</td>
      <td>13.28</td>
      <td>27.66</td>
      <td>128.30</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Austria</td>
      <td>10.44</td>
      <td>20.81</td>
      <td>46.82</td>
      <td>1.79</td>
      <td>3.60</td>
      <td>13.26</td>
      <td>27.72</td>
      <td>135.90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Belgium</td>
      <td>10.34</td>
      <td>20.68</td>
      <td>45.04</td>
      <td>1.73</td>
      <td>3.60</td>
      <td>13.22</td>
      <td>27.45</td>
      <td>129.95</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Bermuda</td>
      <td>10.28</td>
      <td>20.58</td>
      <td>45.91</td>
      <td>1.80</td>
      <td>3.75</td>
      <td>14.68</td>
      <td>30.55</td>
      <td>146.61</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Padronizando os dados, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="n">colunas_de_interesse</span> <span class="o">=</span> <span class="n">registros_atléticos</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">registros_atléticos</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">registros_atléticos_padronizados</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">)</span>
<span class="n">registros_atléticos_padronizados</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">registros_atléticos</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">registros_atléticos_padronizados</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>100m</th>
      <th>200m</th>
      <th>400m</th>
      <th>800m</th>
      <th>1500m</th>
      <th>5000m</th>
      <th>10000m</th>
      <th>Marathon</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>-0.232873</td>
      <td>-0.231357</td>
      <td>0.277945</td>
      <td>0.265078</td>
      <td>0.011769</td>
      <td>0.244610</td>
      <td>0.203488</td>
      <td>0.118825</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Australia</td>
      <td>-0.462613</td>
      <td>-0.582738</td>
      <td>-1.107373</td>
      <td>-0.844216</td>
      <td>-0.829733</td>
      <td>-0.712758</td>
      <td>-0.748770</td>
      <td>-0.910429</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Austria</td>
      <td>-0.089285</td>
      <td>-0.231357</td>
      <td>0.264092</td>
      <td>-0.051863</td>
      <td>-0.635540</td>
      <td>-0.737951</td>
      <td>-0.715161</td>
      <td>-0.079150</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Belgium</td>
      <td>-0.376460</td>
      <td>-0.292263</td>
      <td>-0.968841</td>
      <td>-1.002686</td>
      <td>-0.635540</td>
      <td>-0.788339</td>
      <td>-0.866402</td>
      <td>-0.729954</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Bermuda</td>
      <td>-0.548765</td>
      <td>-0.339114</td>
      <td>-0.366228</td>
      <td>0.106607</td>
      <td>0.335424</td>
      <td>1.050814</td>
      <td>0.870068</td>
      <td>1.092296</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Obtendo a PCA, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">registros_atléticos_padronizados</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>
<span class="n">n_de_colunas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colunas_de_interesse</span><span class="p">)</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n_de_colunas</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Verificando explicabilidade das componentes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">pca_explicabilidade</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;componente&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s2">&quot;var_explicada&quot;</span><span class="p">:</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">,</span>
    <span class="s2">&quot;var_explicada_acumulada&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">)</span>
<span class="p">})</span>

<span class="n">pca_explicabilidade</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>componente</th>
      <th>var_explicada</th>
      <th>var_explicada_acumulada</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.754595</td>
      <td>0.754595</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.123287</td>
      <td>0.877882</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.075251</td>
      <td>0.953133</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.016239</td>
      <td>0.969373</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0.012582</td>
      <td>0.981955</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>0.009291</td>
      <td>0.991245</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>0.005810</td>
      <td>0.997055</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0.002945</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Verificando a combinação das variáveis na formação de cada componente:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">componentes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">,</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>

<span class="n">componentes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>100m</th>
      <th>200m</th>
      <th>400m</th>
      <th>800m</th>
      <th>1500m</th>
      <th>5000m</th>
      <th>10000m</th>
      <th>Marathon</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.322909</td>
      <td>0.160737</td>
      <td>0.365482</td>
      <td>0.384685</td>
      <td>0.390792</td>
      <td>0.386997</td>
      <td>0.389244</td>
      <td>0.366521</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.387412</td>
      <td>0.854439</td>
      <td>0.028941</td>
      <td>-0.039850</td>
      <td>-0.133053</td>
      <td>-0.160330</td>
      <td>-0.166278</td>
      <td>-0.215322</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.541188</td>
      <td>0.445466</td>
      <td>-0.463581</td>
      <td>-0.157428</td>
      <td>0.008739</td>
      <td>0.249976</td>
      <td>0.229151</td>
      <td>0.392313</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.340946</td>
      <td>0.101763</td>
      <td>-0.201256</td>
      <td>0.738155</td>
      <td>0.346143</td>
      <td>-0.138019</td>
      <td>-0.197498</td>
      <td>-0.331894</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.492732</td>
      <td>-0.150067</td>
      <td>-0.700698</td>
      <td>-0.134843</td>
      <td>0.343708</td>
      <td>0.140365</td>
      <td>0.180693</td>
      <td>-0.234622</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-0.295954</td>
      <td>0.106477</td>
      <td>0.340966</td>
      <td>-0.440257</td>
      <td>0.457035</td>
      <td>0.273648</td>
      <td>0.099090</td>
      <td>-0.545350</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-0.011077</td>
      <td>-0.027920</td>
      <td>-0.038151</td>
      <td>0.258768</td>
      <td>-0.611536</td>
      <td>0.576726</td>
      <td>0.230640</td>
      <td>-0.413397</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.077569</td>
      <td>-0.025793</td>
      <td>-0.038512</td>
      <td>-0.042467</td>
      <td>0.093245</td>
      <td>0.561954</td>
      <td>-0.796029</td>
      <td>0.178559</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Usando um gráfico de calor para visualizar o peso de cada variável na formação das componentes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;vlag&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">componentes</span><span class="p">,</span>  <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vlag&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_14_0.png" src="../_images/trabalho_3_14_0.png" />
</div>
</div>
<p>Nota-se que as 2 primeiras componentes já explicam 87% da variabilidade. A primeira componente equilibra os pesos entre todas as variáveis com exceção da variável «200m». Já a segunda componente dá um peso menor para todas as outras e predominantemente é baseada na variável «200m». Assim, optamos por gerar uma PCA com 2 componentes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">componentes_principais</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="s2">&quot;P2&quot;</span><span class="p">])</span>
<span class="n">componentes_principais</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">registros_atléticos</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">componentes_principais</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>P1</th>
      <th>P2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>0.313192</td>
      <td>-0.390623</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Australia</td>
      <td>-2.197765</td>
      <td>-0.130328</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Austria</td>
      <td>-0.830780</td>
      <td>0.116273</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Belgium</td>
      <td>-2.066587</td>
      <td>0.128545</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Bermuda</td>
      <td>0.952213</td>
      <td>-1.110172</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">componentes_principais</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;P2&quot;</span><span class="p">);</span>

<span class="k">for</span> <span class="n">componente</span> <span class="ow">in</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">iloc</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P1</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P2</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">Country</span>
    <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_17_0.png" src="../_images/trabalho_3_17_0.png" />
</div>
</div>
</section>
<section id="questao-9">
<h3>Questão 9<a class="headerlink" href="#questao-9" title="Link permanente para este título">#</a></h3>
<p>Aplique uma análise de componentes principais normalizada ao conjunto de dados US-HEALTH.
Este é um conjunto de dados composto por 50 medições de 13 variáveis. Ele declara por um ano (1985) o número relatado de mortes nos 50 estados dos EUA classificados de acordo com 7 categorias:</p>
<ul class="simple">
<li><p>land: área de terra</p></li>
<li><p>popu.1985: população 1985</p></li>
<li><p>arc: acidentes</p></li>
<li><p>card: cardiovascular</p></li>
<li><p>canc: câncer</p></li>
<li><p>pul: pulmonar</p></li>
<li><p>pneu: pneumonia</p></li>
<li><p>diab: diabetes</p></li>
<li><p>liv: fígado</p></li>
<li><p>doc: médicos</p></li>
<li><p>hosp: hospitais</p></li>
<li><p>reg: número da região dos estados dos EUA</p></li>
<li><p>div: número de divisão dos estados dos EUA</p></li>
<li><p>Número da região dos estados dos EUA: New England 1, Mid-Atlantic 2, E.N. Central 3, W.N. Central 4, S. Atlantic 5, E.S. Central 6, W.S. Central 7, Mountain 8 e Pacific 9.</p></li>
<li><p>Número de divisão dos estados dos EUA: Northeast 1, Midwest 2, South 3 e West 4.</p></li>
</ul>
<p>Interprete os resultados. Seria necessário olhar para uma terceira componente principal? Você consegue ver alguma diferença entre as quatro regiões? Refaça a análise excluindo a variável “área do estado” (land).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">divisoes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;New England&quot;</span><span class="p">,</span> <span class="s2">&quot;Mid-Atlantic&quot;</span><span class="p">,</span> <span class="s2">&quot;E.N. Central&quot;</span><span class="p">,</span> <span class="s2">&quot;W.N. Central&quot;</span><span class="p">,</span> <span class="s2">&quot;S. Atlantic&quot;</span><span class="p">,</span> <span class="s2">&quot;E.S. Central&quot;</span><span class="p">,</span> <span class="s2">&quot;W.S. Central&quot;</span><span class="p">,</span> <span class="s2">&quot;Mountain&quot;</span><span class="p">,</span> <span class="s2">&quot;Pacific&quot;</span><span class="p">]</span>
<span class="n">regioes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Northeast&quot;</span><span class="p">,</span> <span class="s2">&quot;Midwest&quot;</span><span class="p">,</span> <span class="s2">&quot;South&quot;</span><span class="p">,</span> <span class="s2">&quot;West&quot;</span><span class="p">]</span>
<span class="n">us_health</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;./dados/US-HEALTH.txt&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="n">ESPAÇO</span><span class="p">)</span>

<span class="n">us_health</span><span class="o">.</span><span class="n">reg</span> <span class="o">=</span> <span class="p">[</span><span class="n">regioes</span><span class="p">[</span><span class="n">numero_regiao</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">numero_regiao</span> <span class="ow">in</span> <span class="n">us_health</span><span class="o">.</span><span class="n">reg</span><span class="p">]</span>
<span class="n">us_health</span><span class="p">[</span><span class="s1">&#39;div&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">divisoes</span><span class="p">[</span><span class="n">numero_divisao</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">numero_divisao</span> <span class="ow">in</span> <span class="n">us_health</span><span class="p">[</span><span class="s1">&#39;div&#39;</span><span class="p">]]</span>

<span class="n">us_health</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>land</th>
      <th>popu.1985</th>
      <th>acc</th>
      <th>card</th>
      <th>canc</th>
      <th>pul</th>
      <th>pneu</th>
      <th>diab</th>
      <th>liv</th>
      <th>doc</th>
      <th>hosp</th>
      <th>reg</th>
      <th>div</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ME</td>
      <td>33265</td>
      <td>1164.0</td>
      <td>37.7</td>
      <td>466.2</td>
      <td>213.8</td>
      <td>33.6</td>
      <td>21.1</td>
      <td>15.6</td>
      <td>14.5</td>
      <td>1773</td>
      <td>47</td>
      <td>Northeast</td>
      <td>New England</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NH</td>
      <td>9279</td>
      <td>998.0</td>
      <td>35.9</td>
      <td>395.9</td>
      <td>182.2</td>
      <td>29.6</td>
      <td>20.1</td>
      <td>17.6</td>
      <td>10.4</td>
      <td>1612</td>
      <td>34</td>
      <td>Northeast</td>
      <td>New England</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VT</td>
      <td>9614</td>
      <td>535.0</td>
      <td>41.3</td>
      <td>433.1</td>
      <td>188.1</td>
      <td>33.1</td>
      <td>24.0</td>
      <td>15.6</td>
      <td>13.1</td>
      <td>1154</td>
      <td>19</td>
      <td>Northeast</td>
      <td>New England</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MA</td>
      <td>8284</td>
      <td>5822.0</td>
      <td>31.1</td>
      <td>460.6</td>
      <td>219.0</td>
      <td>24.9</td>
      <td>29.7</td>
      <td>16.0</td>
      <td>13.0</td>
      <td>16442</td>
      <td>177</td>
      <td>Northeast</td>
      <td>New England</td>
    </tr>
    <tr>
      <th>4</th>
      <td>RI</td>
      <td>1212</td>
      <td>968.0</td>
      <td>28.6</td>
      <td>474.1</td>
      <td>231.5</td>
      <td>27.4</td>
      <td>17.7</td>
      <td>26.2</td>
      <td>13.4</td>
      <td>2020</td>
      <td>21</td>
      <td>Northeast</td>
      <td>New England</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Padronizando os dados:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">colunas_de_interesse</span> <span class="o">=</span> <span class="n">us_health</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">us_health</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">us_health_padronizado</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">)</span>

<span class="n">us_health_padronizado</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>land</th>
      <th>popu.1985</th>
      <th>acc</th>
      <th>card</th>
      <th>canc</th>
      <th>pul</th>
      <th>pneu</th>
      <th>diab</th>
      <th>liv</th>
      <th>doc</th>
      <th>hosp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.531332</td>
      <td>-0.710753</td>
      <td>-0.608130</td>
      <td>0.811420</td>
      <td>1.081629</td>
      <td>1.282720</td>
      <td>0.015126</td>
      <td>0.210412</td>
      <td>1.454308</td>
      <td>-0.628704</td>
      <td>-0.773637</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-1.038072</td>
      <td>-0.743724</td>
      <td>-0.773683</td>
      <td>-0.031536</td>
      <td>0.115834</td>
      <td>0.561483</td>
      <td>-0.228843</td>
      <td>0.761230</td>
      <td>-0.054463</td>
      <td>-0.643291</td>
      <td>-0.884865</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-1.030994</td>
      <td>-0.835685</td>
      <td>-0.277025</td>
      <td>0.414523</td>
      <td>0.296157</td>
      <td>1.192566</td>
      <td>0.722638</td>
      <td>0.210412</td>
      <td>0.939118</td>
      <td>-0.684789</td>
      <td>-1.013206</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.059093</td>
      <td>0.214418</td>
      <td>-1.215156</td>
      <td>0.744272</td>
      <td>1.240557</td>
      <td>-0.285971</td>
      <td>2.113264</td>
      <td>0.320576</td>
      <td>0.902319</td>
      <td>0.700398</td>
      <td>0.338648</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-1.208499</td>
      <td>-0.749682</td>
      <td>-1.445091</td>
      <td>0.906148</td>
      <td>1.622596</td>
      <td>0.164803</td>
      <td>-0.814370</td>
      <td>3.129747</td>
      <td>1.049516</td>
      <td>-0.606324</td>
      <td>-0.996094</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Obtendo a PCA:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">us_health_padronizado</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>
<span class="n">n_de_colunas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colunas_de_interesse</span><span class="p">)</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n_de_colunas</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Verificando a explicabilidade:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca_explicabilidade</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;componente&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s2">&quot;var_explicada&quot;</span><span class="p">:</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">,</span>
    <span class="s2">&quot;var_explicada_acumulada&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">)</span>
<span class="p">})</span>

<span class="n">pca_explicabilidade</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>componente</th>
      <th>var_explicada</th>
      <th>var_explicada_acumulada</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.358921</td>
      <td>0.358921</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.265497</td>
      <td>0.624418</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.133427</td>
      <td>0.757845</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.094401</td>
      <td>0.852246</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0.059963</td>
      <td>0.912210</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>0.042515</td>
      <td>0.954725</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>0.022826</td>
      <td>0.977551</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0.014033</td>
      <td>0.991583</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>0.004301</td>
      <td>0.995884</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>0.003509</td>
      <td>0.999393</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>0.000607</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Verificando a combinação das variáveis na formação de cada componente:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">componentes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">,</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>

<span class="n">componentes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>land</th>
      <th>popu.1985</th>
      <th>acc</th>
      <th>card</th>
      <th>canc</th>
      <th>pul</th>
      <th>pneu</th>
      <th>diab</th>
      <th>liv</th>
      <th>doc</th>
      <th>hosp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>-0.007811</td>
      <td>-0.362711</td>
      <td>0.331463</td>
      <td>-0.382785</td>
      <td>-0.408834</td>
      <td>-0.160433</td>
      <td>-0.176639</td>
      <td>-0.263192</td>
      <td>-0.268287</td>
      <td>-0.371483</td>
      <td>-0.329628</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.372872</td>
      <td>0.393703</td>
      <td>0.153520</td>
      <td>-0.297368</td>
      <td>-0.296345</td>
      <td>-0.244367</td>
      <td>-0.164728</td>
      <td>-0.337643</td>
      <td>0.114145</td>
      <td>0.360277</td>
      <td>0.403071</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.484111</td>
      <td>-0.075173</td>
      <td>0.237525</td>
      <td>0.155333</td>
      <td>-0.021816</td>
      <td>0.475690</td>
      <td>0.580023</td>
      <td>-0.261153</td>
      <td>-0.176697</td>
      <td>-0.101358</td>
      <td>0.080990</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.000137</td>
      <td>-0.044723</td>
      <td>0.308089</td>
      <td>-0.153264</td>
      <td>0.046060</td>
      <td>0.504549</td>
      <td>-0.271661</td>
      <td>-0.025932</td>
      <td>0.718784</td>
      <td>-0.005559</td>
      <td>-0.178177</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.529544</td>
      <td>-0.015030</td>
      <td>0.077068</td>
      <td>0.043783</td>
      <td>0.055748</td>
      <td>0.152165</td>
      <td>-0.503449</td>
      <td>0.543661</td>
      <td>-0.266923</td>
      <td>-0.196710</td>
      <td>0.162076</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-0.171088</td>
      <td>0.048110</td>
      <td>0.806337</td>
      <td>0.349559</td>
      <td>0.243097</td>
      <td>-0.335578</td>
      <td>0.033761</td>
      <td>0.090569</td>
      <td>-0.001754</td>
      <td>0.005821</td>
      <td>0.122292</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.304358</td>
      <td>-0.159497</td>
      <td>0.018805</td>
      <td>-0.247144</td>
      <td>-0.150080</td>
      <td>-0.378198</td>
      <td>0.467920</td>
      <td>0.522126</td>
      <td>0.355471</td>
      <td>0.061794</td>
      <td>-0.182184</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.404325</td>
      <td>-0.191033</td>
      <td>-0.221720</td>
      <td>0.228714</td>
      <td>0.398689</td>
      <td>-0.391045</td>
      <td>-0.139114</td>
      <td>-0.404504</td>
      <td>0.296693</td>
      <td>-0.335071</td>
      <td>-0.058428</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.181870</td>
      <td>0.002797</td>
      <td>-0.023820</td>
      <td>0.600452</td>
      <td>-0.426448</td>
      <td>-0.034476</td>
      <td>-0.169539</td>
      <td>-0.037202</td>
      <td>0.004417</td>
      <td>0.382109</td>
      <td>-0.496593</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.162973</td>
      <td>0.009750</td>
      <td>0.093485</td>
      <td>-0.343859</td>
      <td>0.562889</td>
      <td>0.012177</td>
      <td>-0.041352</td>
      <td>-0.072789</td>
      <td>-0.285078</td>
      <td>0.482308</td>
      <td>-0.456591</td>
    </tr>
    <tr>
      <th>11</th>
      <td>-0.033254</td>
      <td>-0.800757</td>
      <td>-0.016962</td>
      <td>0.033913</td>
      <td>-0.007338</td>
      <td>0.025318</td>
      <td>-0.089891</td>
      <td>-0.034103</td>
      <td>0.013952</td>
      <td>0.434106</td>
      <td>0.397070</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Usando um gráfico de calor para visualizar o peso de cada variável na formação das componentes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">componentes</span><span class="p">,</span>  <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vlag&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_29_0.png" src="../_images/trabalho_3_29_0.png" />
</div>
</div>
<p>Já neste dataset, notamos que somente após a terceira componente vemos pesos próximos de 0 para muitas variáveis. Além disto, com 3 componentes temos 75% da variabilidade explicada. Assim, optamos por gerar uma PCA com 3 componentes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">componentes_principais</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="s2">&quot;P2&quot;</span><span class="p">,</span> <span class="s2">&quot;P3&quot;</span><span class="p">])</span>
<span class="n">componentes_principais</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s2">&quot;State&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">us_health</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">componentes_principais</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>P1</th>
      <th>P2</th>
      <th>P3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ME</td>
      <td>-0.857879</td>
      <td>-1.892457</td>
      <td>0.062301</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NH</td>
      <td>0.281384</td>
      <td>-1.774777</td>
      <td>-0.699107</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VT</td>
      <td>-0.098347</td>
      <td>-1.996418</td>
      <td>0.308733</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MA</td>
      <td>-2.290029</td>
      <td>-0.980634</td>
      <td>0.074068</td>
    </tr>
    <tr>
      <th>4</th>
      <td>RI</td>
      <td>-1.642177</td>
      <td>-3.180929</td>
      <td>-2.182545</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;3d&#39;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P3</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;P1&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;P2&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s2">&quot;P3&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="k">for</span> <span class="n">componente</span> <span class="ow">in</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">iloc</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P1</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P2</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P3</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">State</span>
    <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_32_0.png" src="../_images/trabalho_3_32_0.png" />
</div>
</div>
<p>Refazendo a análise sem a variável land, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">colunas_de_interesse</span> <span class="o">=</span> <span class="n">us_health</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">us_health</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">us_health_padronizado</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">)</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">us_health_padronizado</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">colunas_de_interesse</span><span class="p">]</span>
<span class="n">n_de_colunas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colunas_de_interesse</span><span class="p">)</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n_de_colunas</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">pca_explicabilidade</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;componente&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s2">&quot;var_explicada&quot;</span><span class="p">:</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">,</span>
    <span class="s2">&quot;var_explicada_acumulada&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">)</span>
<span class="p">})</span>

<span class="n">pca_explicabilidade</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>componente</th>
      <th>var_explicada</th>
      <th>var_explicada_acumulada</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.394798</td>
      <td>0.394798</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.263367</td>
      <td>0.658165</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.117952</td>
      <td>0.776117</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.103841</td>
      <td>0.879958</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0.049622</td>
      <td>0.929581</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>0.038096</td>
      <td>0.967676</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>0.021064</td>
      <td>0.988741</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0.006391</td>
      <td>0.995132</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>0.004172</td>
      <td>0.999303</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>0.000697</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">componentes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">colunas_de_interesse</span><span class="p">,</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_de_colunas</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">componentes</span><span class="p">,</span>  <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vlag&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_35_0.png" src="../_images/trabalho_3_35_0.png" />
</div>
</div>
<p>Utilizando 3 compontes principais, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">componentes_principais</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">componentes_principais</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="s2">&quot;P2&quot;</span><span class="p">,</span> <span class="s2">&quot;P3&quot;</span><span class="p">])</span>
<span class="n">componentes_principais</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s2">&quot;State&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">us_health</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">componentes_principais</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>P1</th>
      <th>P2</th>
      <th>P3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ME</td>
      <td>-0.870189</td>
      <td>-1.787398</td>
      <td>0.146199</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NH</td>
      <td>0.266286</td>
      <td>-1.425790</td>
      <td>0.765802</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VT</td>
      <td>-0.113609</td>
      <td>-1.774264</td>
      <td>-0.444277</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MA</td>
      <td>-2.300963</td>
      <td>-0.635615</td>
      <td>-0.737941</td>
    </tr>
    <tr>
      <th>4</th>
      <td>RI</td>
      <td>-1.666706</td>
      <td>-2.624261</td>
      <td>2.898004</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span> <span class="o">=</span> <span class="s1">&#39;3d&#39;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">P3</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;P1&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;P2&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s2">&quot;P3&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="k">for</span> <span class="n">componente</span> <span class="ow">in</span> <span class="n">componentes_principais</span><span class="o">.</span><span class="n">iloc</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P1</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P2</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">P3</span><span class="p">,</span>
        <span class="n">componente</span><span class="o">.</span><span class="n">State</span>
    <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_38_0.png" src="../_images/trabalho_3_38_0.png" />
</div>
</div>
</section>
<section id="questao-10-usando-analise-de-cluster">
<h3>Questão 10 (usando Análise de Cluster)<a class="headerlink" href="#questao-10-usando-analise-de-cluster" title="Link permanente para este título">#</a></h3>
<p>Aplique uma análise de componentes principais normalizada ao conjunto de dados GEOPOL.
Este conjunto de dados contém uma comparação de 41 países de acordo com 10 parâmetros políticos e econômicos diferentes:</p>
<ul class="simple">
<li><p>popu: população</p></li>
<li><p>giph: produto interno bruto por habitante</p></li>
<li><p>ripo: taxa de crescimento da população</p></li>
<li><p>rupo: taxa de população urbana</p></li>
<li><p>rlpo: taxa de analfabetismo na população</p></li>
<li><p>rspo: taxa de alunos na população</p></li>
<li><p>eltp: tempo de vida esperado das pessoas</p></li>
<li><p>rnnr: taxa de necessidades nutricionais realizadas</p></li>
<li><p>nunh: número de jornais e revistas por 1000 habitantes</p></li>
<li><p>nuth: número de televisores por 1000 habitantes</p></li>
</ul>
<p>Siglas: AFS África do Sul, DAN Dinamarca, MAR Marrocos, ALG Argélia, EGY Egito, MEX México, BRD Alemanha, ESP Espanha, NOR Noruega, GBR Grã-Bretanha, FRA França, PER Peru, ARS Arábia Saudita, GAB Gabão, POL Polônia, ARG Argentina, GRE Grécia, POR Portugal, AUS Austrália, HOK Hong Kong, SUE Suécia, AUT Áustria, HON Hungria, SUI Suíça, BEL Bélgica, IND Índia, THA Tailândia, CAM Camarões, IDO Indonésia, URS URSS, CAN Canadá, ISR Israel, EUA EUA, CHL Chile, ITA Itália, VEN Venezuela, CHN China, JAP Japão, YOU Iugoslávia, CUB Cuba, KEN Quênia,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geopol</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;./dados/GEOPOL.txt&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="n">ESPAÇO</span><span class="p">)</span>

<span class="n">geopol</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sigla</th>
      <th>popu</th>
      <th>giph</th>
      <th>ripo</th>
      <th>rupo</th>
      <th>rlpo</th>
      <th>rspo</th>
      <th>eltp</th>
      <th>rnnr</th>
      <th>nunh</th>
      <th>nuth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AFS</td>
      <td>37.00</td>
      <td>2492</td>
      <td>2.00</td>
      <td>58.9</td>
      <td>44.0</td>
      <td>1.08</td>
      <td>60</td>
      <td>120</td>
      <td>48</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ALG</td>
      <td>24.60</td>
      <td>1960</td>
      <td>3.00</td>
      <td>44.7</td>
      <td>50.4</td>
      <td>0.73</td>
      <td>64</td>
      <td>112</td>
      <td>21</td>
      <td>71</td>
    </tr>
    <tr>
      <th>2</th>
      <td>BRD</td>
      <td>62.00</td>
      <td>19610</td>
      <td>0.40</td>
      <td>86.4</td>
      <td>2.0</td>
      <td>2.72</td>
      <td>72</td>
      <td>145</td>
      <td>585</td>
      <td>759</td>
    </tr>
    <tr>
      <th>3</th>
      <td>GBR</td>
      <td>57.02</td>
      <td>14575</td>
      <td>0.04</td>
      <td>92.5</td>
      <td>2.2</td>
      <td>1.90</td>
      <td>75</td>
      <td>128</td>
      <td>421</td>
      <td>435</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ARS</td>
      <td>14.40</td>
      <td>5980</td>
      <td>2.70</td>
      <td>77.3</td>
      <td>48.9</td>
      <td>0.91</td>
      <td>63</td>
      <td>125</td>
      <td>34</td>
      <td>269</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Ajustando o cluster, que por padrão usa distância euclidiana e ligação ward, temos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">AgglomerativeClustering</span>

<span class="n">modelo</span> <span class="o">=</span> <span class="n">AgglomerativeClustering</span><span class="p">(</span><span class="n">distance_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_clusters</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">geopol</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">geopol</span><span class="o">.</span><span class="n">columns</span> <span class="o">!=</span> <span class="s2">&quot;Sigla&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Plotando o dendrograma:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">plot_dendrogram</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Dendrograma&quot;</span><span class="p">)</span>
<span class="n">plot_dendrogram</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="n">truncate_mode</span><span class="o">=</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="n">orientation</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="c1"># arruma legendas</span>
<span class="n">eixo_y</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span>
<span class="n">legendas</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">eixo_y</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">():</span>
    <span class="n">legenda</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">legenda</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">):</span>
        <span class="n">label</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">geopol</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">legenda</span><span class="p">)]</span><span class="o">.</span><span class="n">Sigla</span><span class="p">)</span>
    <span class="n">legendas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<span class="n">eixo_y</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">legendas</span><span class="p">);</span>
<span class="n">eixo_y</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">)</span>

<span class="c1">#aumenta figura</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/trabalho_3_44_0.png" src="../_images/trabalho_3_44_0.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./metodos_estatisticos_multivariados"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="trabalho_2.html" title="anterior page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">anterior</p>
            <p class="prev-next-title">Trabalho No. 2</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="trabalho_4.html" title="próximo page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">próximo</p>
        <p class="prev-next-title">Trabalho No. 4</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Guilherme L Oliveira<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>